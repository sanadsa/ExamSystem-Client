<div class="mainDiv">

    <nav class="navbar main-nav">
        <div>
            Test Form
        </div>
    </nav>
    <div class="title-center">
        <h2 class="title">Add New Test In</h2>
        <h2 class="orange">{{field}}</h2>
    </div>
    <div class="container">
        <div class="row second-div">
            <div class="offset-2 col-md-8 mainDiv">
                <form [formGroup]="testForm" (ngSubmit)="createTest()">
                    <div *ngIf="test.Field">
                        Field of study: {{test.Field}}
                    </div>
                    <div *ngIf="!test.Field">
                        Field of study: {{field}}
                    </div>
                    <div>
                        Language :
                        <select formControlName="language">
                            <option selected="language" *ngFor="let language of languages">{{language}}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Test name</label>
                        <input type="text" formControlName="name" class="form-control" value="{{test.TestName}}"
                            [ngClass]="{ 'is-invalid': submitted && f.name.errors }" />
                        <div *ngIf="submitted && f.name.errors" class="invalid-feedback">
                            <div *ngIf="f.name.errors.required"> Name is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Time</label>
                        <input type="text" formControlName="time" class="form-control" value="{{test.Time}}" [ngClass]="{ 'is-invalid': submitted && f.time.errors }" />
                        <div *ngIf="submitted && f.time.errors" class="invalid-feedback">
                            <div *ngIf="f.time.errors.required"> Time is required</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Owner Email</label>
                        <input type="text" formControlName="ownerEmail" value="{{test.OwnerEmail}}" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && f.ownerEmail.errors }" />
                        <div *ngIf="submitted && f.ownerEmail.errors" class="invalid-feedback">
                            <div *ngIf="f.ownerEmail.errors.required"> Owner Email is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Passing Grade</label>
                        <input type="text" formControlName="passingGrade" value="{{test.PassingGrade}}" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && f.passingGrade.errors }" />
                        <div *ngIf="submitted && f.passingGrade.errors" class="invalid-feedback">
                            <div *ngIf="f.passingGrade.errors.required"> Passing grade is required</div>
                        </div>
                    </div>
                    <div>
                        Show correct answers after submission <input checked="{{test.ReviewAnswers}}" formControlName="reviewAnswers"
                            type="checkbox">Show
                    </div>
                    <div class="form-group">
                        <label>Instructions: </label>
                        <textarea formControlName="instructions" value="{{test.Instructions}}" class="form-control"
                            [ngClass]="{ 'is-invalid': submitted && f.instructions.errors }"></textarea>
                        <div *ngIf="submitted && f.instructions.errors" class="invalid-feedback">
                            <div *ngIf="f.instructions.errors.required"> Instructions is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Message to show on success: </label>
                        <textarea formControlName="msgSuccess" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.msgSuccess.errors }"></textarea>
                        <div *ngIf="submitted && f.msgSuccess.errors" class="invalid-feedback">
                            <div *ngIf="f.msgSuccess.errors.required"> Message success is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Message to show on Failure: </label>
                        <textarea formControlName="msgFailure" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.msgFailure.errors }"></textarea>
                        <div *ngIf="submitted && f.msgFailure.errors" class="invalid-feedback">
                            <div *ngIf="f.msgFailure.errors.required"> Message failure is required</div>
                        </div>
                    </div>
                    <hr>
                    <div class="orange">
                        Select the Questions that you want to include in the test
                    </div>
                    <div class="content-between">
                        <div>
                            <button type="button" class="btn btn-outline-secondary mr-2" (click)="selectAllFiltered()">Select
                                All Questions</button>
                        </div>
                    </div>
                    <div *ngFor="let question of questionsFilteredList">
                        <div>
                            <question [question]="question" (onSelectQuestion)="addQuestion($event)"></question>
                            <hr>
                        </div>
                    </div>
                    <div class="content-center">
                        The test will include {{selectedQuestionsId.length}} questions
                    </div>
                    <br>
                    <hr>
                    <div class="content-center">
                        <button class="btn btn-outline-secondary mr-2" type="submit">Save</button>
                        <button class="btn btn-outline-secondary mr-2" (click)="navToTestsList()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>